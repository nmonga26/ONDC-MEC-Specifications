summary: OTT - Discovery of Catalog
description: The following is an illustrative flow to showcase how diffferent types of discovery or searches can be done over network. The booking majorly happens in four phases of order processing flow, i.e. Discovery of available services and service providers based on serviceability, order, fulfillment and post-fulfillment.
details:
  - description: Sequence Diagram for Booking OTT Media - Search
    mermaidGraph: >-
      sequenceDiagram
        participant B as Buyer
        participant BA as BuyerApp
        participant G as Gateway
        participant SA1 as SellerApp1
        participant SA2 as SellerApp2
        Note Over B,SA2: **SEARCH FLOW**
        B ->> BA: Search for the OTT Media
        BA ->> G: **/search** - Search for the OTT Media
        G ->> SA1: **/search** - Search request broadcasted based <br>on city, domain in context and message
        G ->> SA2: **/search** - Search request broadcasted based <br>on city, domain in context and message
        SA1 ->> BA: **/on_search** - Media catalog returned <br>with pricing, seller details, packages/tests
        SA2 ->> BA: **/on_search** - Media catalog returned <br>with pricing, seller details, packages/tests
        Note Over BA,SA1: Buyer now has the option to choose the <br>media from either Seller 1 or Seller 2 or both
        BA ->> B: Shows all catalog <br>options from sellers

reference: if any
steps:
  - summary: Search based on city
    api: search (by city)
    description: Search intent sent by the buyer to media catalog based on availability in a city
    reference: if any
    example:
      $ref: "../../Examples/OTT_services_yaml/search/search_by_city.yaml"
  - summary: Search based on item
    api: search (by item)
    description: Search intent sent by the buyer based on the item name - e.g. Movies
    reference: if any
    example:
      $ref: "../../Examples/OTT_services_yaml/search/search_by_item.yaml"
  - summary: Search based on category
    api: search (by category)
    description: Search intent sent by the buyer based on category
    reference: if any
    example:
      $ref: "../../Examples/OTT_services_yaml/search/search_by_category.yaml"
  - summary: Selles responds with catalog
    api: on_search
    description: Seller responds with their full or partial catalog based on intent matching
    reference: if any
    example:
      $ref: "../../Examples/OTT_services_yaml/on_search/on_search.yaml"
