summary: OTT - DRM Sharing
description: The following is an illustrative flow to perform a transaction of a nature where a buyer would like to request for OTT. The booking majorly happens in four phases of order processing flow, i.e. Discovery of available services and service providers based on serviceability, order, fulfillment and post-fulfillment.
details:
  - description: Order Confirmation
    mermaidGraph: >-
      sequenceDiagram
        participant B as Buyer
        participant BA as BuyerApp
        participant SA as SellerApp
        Note Over B,SA: **CONFIRMATION FLOW**
        B ->> BA: Confirms the Order
        BA ->> SA: **/confirm** - Receives payment (optional) <br>& creates order to create final digital contract
        SA ->> BA: **/on_confirm** - Accepts the order 
        BA ->> B: Confirms order
  - description: Fulfillment
    explanation: TBD
    mermaidGraph: >-
      sequenceDiagram
        participant B as Buyer
        participant BA as BuyerApp
        participant SA as SellerApp      
        Note Over B,SA: **ORDER STATUS FLOW**
        B ->> BA: Checks the order status
        BA ->> SA: **/status** - Enquire order status <br>or tracking information
        SA ->> BA: **/on_status** - Latest order and fulfillment status is sent
        BA ->> B: Updates the latest order <br>and fulfillment information
  - description: Fulfillment
    explanation: TBD
    mermaidGraph: >-
      sequenceDiagram
        participant B as Buyer
        participant BA as BuyerApp
        participant SA as SellerApp      
        Note Over B,SA: **DRM KEY SHARE FLOW**
        B ->> BA: Tries to access content
        BA ->> SA: **/update** - Requests for DRM Key
        SA ->> BA: **/on_update** - Checks status of order<br> and sends back DRM key
        BA ->> B: Streams the media after<br> gaining access

reference: if any
steps:
  - summary: Buyer confirm the order for the service
    api: confirm
    description: Buyer makes the payment on the seller payment link that is rendered by the buyer app to confirm the order
    example:
      $ref: "../../Examples/OTT_services_yaml/confirm/confirm.yaml"
  - summary: Seller accepts the order for service
    api: on_confirm
    description: Seller app confirms the payment received and sends an /on_confirm call for confirming subscription
    reference: if any
    example:
      $ref: "../../Examples/OTT_services_yaml/on_confirm/on_confirm.yaml"
  - summary: Buyer requests for status of the order
    api: status
    description: Buyer requests for status of the order
    reference: if any
    example:
      $ref: "../../Examples/OTT_services_yaml/status/status.yaml"
  - summary: Seller sends back the current status of the order
    api: on_status (Pending)
    description: Seller app sends the current status update of the order
    reference: if any
    example:
      $ref: "../../Examples/OTT_services_yaml/on_status/on_status.yaml"
  - summary: Seller sends back the current status of the order
    api: on_status (Completed)
    description: Seller app sends the current status update of the order when the order is completed
    reference: if any
    example:
      $ref: "../../Examples/OTT_services_yaml/on_status/on_status_completed.yaml"
  - summary: Buyer tries to access the content
    api: update
    description: Buyer tries to view the content for a session
    reference: if any
    example:
      $ref: "../../Examples/OTT_services_yaml/update/update.yaml"
  - summary: Seller sends back DRM key
    api: on_update
    description: Seller app sends the key for that particular session
    reference: if any
    example:
      $ref: "../../Examples/OTT_services_yaml/on_update/on_update.yaml"
